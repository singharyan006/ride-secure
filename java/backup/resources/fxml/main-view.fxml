<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.media.MediaView?>

<VBox fx:id="rootContainer" xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.ridesecure.controller.MainController">
   
   <!-- Menu Bar -->
   <MenuBar fx:id="menuBar">
      <menus>
         <Menu mnemonicParsing="false" text="File">
            <items>
               <MenuItem fx:id="openVideoMenuItem" mnemonicParsing="false" text="Open Video..." />
               <SeparatorMenuItem mnemonicParsing="false" />
               <MenuItem fx:id="exitMenuItem" mnemonicParsing="false" text="Exit" />
            </items>
         </Menu>
         <Menu mnemonicParsing="false" text="Detection">
            <items>
               <MenuItem mnemonicParsing="false" text="Settings..." />
               <MenuItem mnemonicParsing="false" text="Model Configuration..." />
            </items>
         </Menu>
         <Menu mnemonicParsing="false" text="Help">
            <items>
               <MenuItem mnemonicParsing="false" text="About" />
            </items>
         </Menu>
      </menus>
   </MenuBar>

   <!-- Main Content Area -->
   <HBox VBox.vgrow="ALWAYS">
      
      <!-- Left Panel - Video and Controls -->
      <VBox prefWidth="600" spacing="10">
         <padding>
            <Insets bottom="10.0" left="10.0" right="5.0" top="10.0" />
         </padding>
         
         <!-- Video Display -->
         <VBox fx:id="videoContainer" prefHeight="400" style="-fx-border-color: #cccccc; -fx-border-width: 1;">
            <MediaView fx:id="mediaView" fitHeight="400" fitWidth="580" preserveRatio="true">
               <VBox.margin>
                  <Insets />
               </VBox.margin>
            </MediaView>
         </VBox>
         
         <!-- Video Controls -->
         <HBox alignment="CENTER" spacing="10">
            <Button fx:id="playButton" text="▶ Play" />
            <Button fx:id="pauseButton" text="⏸ Pause" />
            <Button fx:id="stopButton" text="⏹ Stop" />
            <Slider fx:id="timeSlider" maxWidth="300" HBox.hgrow="ALWAYS" />
            <Label fx:id="timeLabel" minWidth="80" text="00:00 / 00:00" />
         </HBox>
         
         <!-- Detection Controls -->
         <Separator />
         <Label style="-fx-font-weight: bold;" text="Detection Controls" />
         
         <HBox alignment="CENTER_LEFT" spacing="10">
            <Button fx:id="startDetectionButton" style="-fx-background-color: #4CAF50; -fx-text-fill: white;" text="🔍 Start Detection" />
            <Button fx:id="stopDetectionButton" style="-fx-background-color: #f44336; -fx-text-fill: white;" text="⏹ Stop Detection" />
            <CheckBox fx:id="realTimeDetectionCheckbox" text="Real-time Detection" />
         </HBox>
         
         <HBox alignment="CENTER_LEFT" spacing="10">
            <Label text="Status:" />
            <Label fx:id="detectionStatusLabel" text="Ready" />
            <ProgressBar fx:id="detectionProgressBar" prefWidth="150" />
         </HBox>
         
         <!-- Current Frame Display -->
         <Separator />
         <Label style="-fx-font-weight: bold;" text="Detection Results" />
         
         <ScrollPane fitToHeight="true" fitToWidth="true" maxHeight="200">
            <ImageView fx:id="currentFrameImageView" fitHeight="180" fitWidth="320" preserveRatio="true" style="-fx-border-color: #dddddd; -fx-border-width: 1;" />
         </ScrollPane>
      </VBox>
      
      <!-- Right Panel - Results and Statistics -->
      <VBox prefWidth="400" spacing="10">
         <padding>
            <Insets bottom="10.0" left="5.0" right="10.0" top="10.0" />
         </padding>
         
         <!-- Statistics Panel -->
         <VBox spacing="5" style="-fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-background-color: #f9f9f9;">
            <padding>
               <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>
            
            <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" text="Detection Statistics" />
            
            <GridPane hgap="10" vgap="5">
               <columnConstraints>
                  <ColumnConstraints />
                  <ColumnConstraints />
               </columnConstraints>
               <rowConstraints>
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
               </rowConstraints>
               
               <Label text="Total Violations:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
               <Label fx:id="totalViolationsLabel" style="-fx-font-weight: bold;" text="0" GridPane.columnIndex="1" GridPane.rowIndex="0" />
               
               <Label text="Detection Accuracy:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
               <Label fx:id="detectionAccuracyLabel" style="-fx-font-weight: bold;" text="--" GridPane.columnIndex="1" GridPane.rowIndex="1" />
               
               <Label text="Processing Speed:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
               <Label fx:id="processingSpeedLabel" style="-fx-font-weight: bold;" text="--" GridPane.columnIndex="1" GridPane.rowIndex="2" />
            </GridPane>
         </VBox>
         
         <!-- Violations Table -->
         <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" text="Detected Violations" />
         
         <TableView fx:id="violationsTable" VBox.vgrow="ALWAYS">
            <columns>
               <TableColumn fx:id="idColumn" prefWidth="40" text="ID" />
               <TableColumn fx:id="timestampColumn" prefWidth="120" text="Time" />
               <TableColumn fx:id="licensePlateColumn" prefWidth="100" text="License Plate" />
               <TableColumn fx:id="confidenceColumn" prefWidth="80" text="Confidence" />
               <TableColumn fx:id="statusColumn" prefWidth="80" text="Status" />
            </columns>
            
            <placeholder>
               <Label text="No violations detected yet" />
            </placeholder>
         </TableView>
         
         <!-- Action Buttons -->
         <HBox alignment="CENTER" spacing="10">
            <Button text="📊 Export Report" />
            <Button text="🗑️ Clear Results" />
            <Button text="⚙️ Settings" />
         </HBox>
      </VBox>
   </HBox>
   
   <!-- Status Bar -->
   <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #f0f0f0; -fx-border-color: #cccccc; -fx-border-width: 1 0 0 0;">
      <padding>
         <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
      </padding>
      
      <Label text="Ready" />
      <Region HBox.hgrow="ALWAYS" />
      <Label text="RideSecure v1.0.0" />
   </HBox>
</VBox>